import type { DeviceSpec, Lesson } from '@/types';

// Moog DFAM - Exact Hardware Specifications
// Based on official manual and physical measurements
// Real dimensions: 319mm x 107mm x 133mm (12.57" x 4.21" x 5.24")
// Scale: ~4.4px per mm for 1400px width display

export const DFAM_SPEC: DeviceSpec = {
  name: 'DFAM - Drummer From Another Mother',
  manufacturer: 'Moog',
  width: 1400,  // Scaled from 319mm (12.57")
  height: 470,  // Scaled from 107mm (4.21") - 3:1 ratio
  controls: {
    // OSCILLATOR SECTION (Top Left)
    vco1_frequency: {
      type: 'knob',
      position: { x: 80, y: 120 },
      min: -5,
      max: 5,
      default: 0,
      units: 'octaves',
      bipolar: true,
      label: 'VCO 1 FREQUENCY',
      size: 'medium', // 14mm = ~62px
      step: 0.1,
    },
    vco1_wave: {
      type: 'switch',
      position: { x: 80, y: 220 },
      min: 0,
      max: 1,
      default: 0,
      units: '%',
      label: 'VCO 1 WAVE',
      options: ['TRI', 'SQR'],
    },
    vco2_frequency: {
      type: 'knob',
      position: { x: 200, y: 120 },
      min: -5,
      max: 5,
      default: 0,
      units: 'octaves',
      bipolar: true,
      label: 'VCO 2 FREQUENCY',
      size: 'medium',
      step: 0.1,
    },
    vco2_wave: {
      type: 'switch',
      position: { x: 200, y: 220 },
      min: 0,
      max: 1,
      default: 0,
      units: '%',
      label: 'VCO 2 WAVE',
      options: ['TRI', 'SQR'],
    },
    vco1_eg: {
      type: 'knob',
      position: { x: 150, y: 120 },
      min: -100,
      max: 100,
      default: 0,
      units: '%',
      bipolar: true,
      label: 'VCO 1 EG AMT',
      size: 'small',
    },
    vco2_eg: {
      type: 'knob',
      position: { x: 250, y: 120 },
      min: -100,
      max: 100,
      default: 0,
      units: '%',
      bipolar: true,
      label: 'VCO 2 EG AMT',
      size: 'small',
    },
    fm_amount: {
      type: 'knob',
      position: { x: 100, y: 250 },
      min: 0,
      max: 100,
      default: 0,
      units: '%',
      label: '1â†’2 FM AMT',
      size: 'small',
    },
    hard_sync: {
      type: 'switch',
      position: { x: 280, y: 170 },
      min: 0,
      max: 1,
      default: 0,
      units: '%',
      label: 'HARD SYNC',
      options: ['OFF', 'ON'],
    },

    // MIXER SECTION
    vco1_level: {
      type: 'knob',
      position: { x: 80, y: 300 },
      min: 0,
      max: 100,
      default: 75,
      units: '%',
      label: 'VCO 1',
      size: 'medium',
    },
    vco2_level: {
      type: 'knob',
      position: { x: 200, y: 300 },
      min: 0,
      max: 100,
      default: 50,
      units: '%',
      label: 'VCO 2',
      size: 'medium',
    },
    noise: {
      type: 'knob',
      position: { x: 320, y: 300 },
      min: 0,
      max: 100,
      default: 10,
      units: '%',
      label: 'NOISE',
      size: 'medium',
    },

    // FILTER SECTION (Center - Large Controls)
    vcf_cutoff: {
      type: 'knob',
      position: { x: 500, y: 140 },
      min: 20,
      max: 20000,
      default: 1000,
      units: 'Hz',
      label: 'CUTOFF',
      size: 'large', // 20mm = ~88px
    },
    vcf_resonance: {
      type: 'knob',
      position: { x: 650, y: 180 },
      min: 0,
      max: 100,
      default: 30,
      units: '%',
      label: 'RESONANCE',
      size: 'medium',
    },
    vcf_eg: {
      type: 'knob',
      position: { x: 770, y: 180 },
      min: -100,
      max: 100,
      default: 0,
      units: '%',
      bipolar: true,
      label: 'VCF EG AMT',
      size: 'medium',
    },
    vcf_mode: {
      type: 'switch',
      position: { x: 650, y: 280 },
      min: 0,
      max: 1,
      default: 0,
      units: '%',
      label: 'MODE',
      options: ['LP', 'HP'],
    },
    noise_vcf_mod: {
      type: 'knob',
      position: { x: 800, y: 180 },
      min: 0,
      max: 100,
      default: 0,
      units: '%',
      label: 'NOISE/VCF MOD',
      size: 'small',
    },

    // ENVELOPE DECAY SECTION
    vco_decay: {
      type: 'knob',
      position: { x: 80, y: 430 },
      min: 10,
      max: 10000,
      default: 300,
      units: 'ms',
      label: 'VCO DECAY',
      size: 'medium',
    },
    vcf_decay: {
      type: 'knob',
      position: { x: 200, y: 430 },
      min: 10,
      max: 10000,
      default: 400,
      units: 'ms',
      label: 'VCF DECAY',
      size: 'medium',
    },
    vca_decay: {
      type: 'knob',
      position: { x: 320, y: 430 },
      min: 10,
      max: 10000,
      default: 500,
      units: 'ms',
      label: 'VCA DECAY',
      size: 'medium',
    },

    // VCA SECTION
    vca_eg: {
      type: 'knob',
      position: { x: 500, y: 430 },
      min: 0,
      max: 100,
      default: 50,
      units: '%',
      label: 'VCA EG AMT',
      size: 'medium',
    },
    vca_level: {
      type: 'knob',
      position: { x: 620, y: 430 },
      min: 0,
      max: 100,
      default: 75,
      units: '%',
      label: 'VCA LEVEL',
      size: 'medium',
    },

    // SEQUENCER TEMPO
    tempo: {
      type: 'knob',
      position: { x: 750, y: 430 },
      min: 10,
      max: 500,
      default: 120,
      units: 'BPM',
      label: 'TEMPO',
      size: 'medium',
    },

    // SEQUENCER - 8 STEPS (Pitch Row)
    pitch1: { type: 'knob', position: { x: 100, y: 560 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: '1', size: 'small' },
    pitch2: { type: 'knob', position: { x: 200, y: 560 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: '2', size: 'small' },
    pitch3: { type: 'knob', position: { x: 300, y: 560 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: '3', size: 'small' },
    pitch4: { type: 'knob', position: { x: 400, y: 560 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: '4', size: 'small' },
    pitch5: { type: 'knob', position: { x: 500, y: 560 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: '5', size: 'small' },
    pitch6: { type: 'knob', position: { x: 600, y: 560 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: '6', size: 'small' },
    pitch7: { type: 'knob', position: { x: 700, y: 560 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: '7', size: 'small' },
    pitch8: { type: 'knob', position: { x: 800, y: 560 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: '8', size: 'small' },

    // SEQUENCER - Velocity Row
    velocity1: { type: 'knob', position: { x: 100, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: '1', size: 'small' },
    velocity2: { type: 'knob', position: { x: 200, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: '2', size: 'small' },
    velocity3: { type: 'knob', position: { x: 300, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: '3', size: 'small' },
    velocity4: { type: 'knob', position: { x: 400, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: '4', size: 'small' },
    velocity5: { type: 'knob', position: { x: 500, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: '5', size: 'small' },
    velocity6: { type: 'knob', position: { x: 600, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: '6', size: 'small' },
    velocity7: { type: 'knob', position: { x: 700, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: '7', size: 'small' },
    velocity8: { type: 'knob', position: { x: 800, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: '8', size: 'small' },

    // SEQUENCER Controls
    run_stop: { type: 'button', position: { x: 900, y: 580 }, min: 0, max: 1, default: 0, units: '%', label: 'RUN/STOP', led: true },
    advance: { type: 'button', position: { x: 900, y: 650 }, min: 0, max: 1, default: 0, units: '%', label: 'ADVANCE', led: false },

    // PATCH BAY (Right Side - 24 Points)
    // INPUTS (15 points)
    patch_in_trigger: { type: 'jack', position: { x: 1100, y: 80 }, min: 0, max: 1, default: 0, units: '%', label: 'TRIG IN' },
    patch_in_vca_cv: { type: 'jack', position: { x: 1100, y: 120 }, min: 0, max: 1, default: 0, units: '%', label: 'VCA CV' },
    patch_in_velocity: { type: 'jack', position: { x: 1100, y: 160 }, min: 0, max: 1, default: 0, units: '%', label: 'VELOCITY' },
    patch_in_vca_decay: { type: 'jack', position: { x: 1100, y: 200 }, min: 0, max: 1, default: 0, units: '%', label: 'VCA DECAY' },
    patch_in_ext_audio: { type: 'jack', position: { x: 1100, y: 240 }, min: 0, max: 1, default: 0, units: '%', label: 'EXT AUDIO' },
    patch_in_vcf_decay: { type: 'jack', position: { x: 1100, y: 280 }, min: 0, max: 1, default: 0, units: '%', label: 'VCF DECAY' },
    patch_in_noise: { type: 'jack', position: { x: 1100, y: 320 }, min: 0, max: 1, default: 0, units: '%', label: 'NOISE' },
    patch_in_vco_decay: { type: 'jack', position: { x: 1100, y: 360 }, min: 0, max: 1, default: 0, units: '%', label: 'VCO DECAY' },
    patch_in_vcf_mod: { type: 'jack', position: { x: 1100, y: 400 }, min: 0, max: 1, default: 0, units: '%', label: 'VCF MOD' },
    patch_in_vco1_cv: { type: 'jack', position: { x: 1100, y: 440 }, min: 0, max: 1, default: 0, units: '%', label: 'VCO 1 CV' },
    patch_in_vco2_cv: { type: 'jack', position: { x: 1100, y: 480 }, min: 0, max: 1, default: 0, units: '%', label: 'VCO 2 CV' },
    patch_in_tempo: { type: 'jack', position: { x: 1100, y: 520 }, min: 0, max: 1, default: 0, units: '%', label: 'TEMPO' },
    patch_in_run_stop: { type: 'jack', position: { x: 1100, y: 560 }, min: 0, max: 1, default: 0, units: '%', label: 'RUN/STOP' },
    patch_in_advance: { type: 'jack', position: { x: 1100, y: 600 }, min: 0, max: 1, default: 0, units: '%', label: 'ADVANCE' },
    patch_in_clock: { type: 'jack', position: { x: 1100, y: 640 }, min: 0, max: 1, default: 0, units: '%', label: 'CLOCK' },

    // OUTPUTS (9 points)
    patch_out_vca: { type: 'jack', position: { x: 1240, y: 80 }, min: 0, max: 1, default: 0, units: '%', label: 'VCA OUT' },
    patch_out_vca_eg: { type: 'jack', position: { x: 1240, y: 140 }, min: 0, max: 1, default: 0, units: '%', label: 'VCA EG' },
    patch_out_vcf_eg: { type: 'jack', position: { x: 1240, y: 200 }, min: 0, max: 1, default: 0, units: '%', label: 'VCF EG' },
    patch_out_vco_eg: { type: 'jack', position: { x: 1240, y: 260 }, min: 0, max: 1, default: 0, units: '%', label: 'VCO EG' },
    patch_out_vco1: { type: 'jack', position: { x: 1240, y: 320 }, min: 0, max: 1, default: 0, units: '%', label: 'VCO 1' },
    patch_out_vco2: { type: 'jack', position: { x: 1240, y: 380 }, min: 0, max: 1, default: 0, units: '%', label: 'VCO 2' },
    patch_out_trigger: { type: 'jack', position: { x: 1240, y: 440 }, min: 0, max: 1, default: 0, units: '%', label: 'TRIGGER' },
    patch_out_velocity: { type: 'jack', position: { x: 1240, y: 500 }, min: 0, max: 1, default: 0, units: '%', label: 'VELOCITY' },
    patch_out_pitch: { type: 'jack', position: { x: 1240, y: 560 }, min: 0, max: 1, default: 0, units: '%', label: 'PITCH' },
  },
  presets: {
    classic_kick: {
      name: 'Classic 909 Kick',
      source: 'Official Manual',
      description: 'Punchy 909-style kick drum with pitch sweep',
      settings: {
        vco1_frequency: 0,
        vco2_frequency: 0.5,
        vco_decay: 300,
        vco1_level: 80,
        vco2_level: 60,
        noise: 10,
        vcf_cutoff: 800,
        vcf_eg: 60,
        vcf_decay: 400,
        vca_decay: 150,
      },
    },
    sub_kick: {
      name: '808 Sub Kick',
      source: 'Community',
      description: 'Deep sub bass kick like TR-808',
      settings: {
        vco1_frequency: -1,
        vco2_frequency: -0.5,
        vco_decay: 500,
        noise: 5,
        vcf_cutoff: 600,
        vca_decay: 300,
      },
    },
    snare: {
      name: 'Snappy Snare',
      source: 'Community',
      description: 'Bright electronic snare with noise',
      settings: {
        vco1_frequency: 2,
        vco2_frequency: 2.5,
        vco_decay: 100,
        vco1_level: 40,
        noise: 80,
        vcf_cutoff: 4000,
        vcf_resonance: 50,
        vca_decay: 120,
      },
    },
  },
};

export const DFAM_LESSONS: Lesson[] = [
  {
    device: 'DFAM',
    name: 'Classic 909 Kick',
    description: 'Create a punchy 909-style kick drum',
    source: 'Official Manual',
    steps: [
      { control: 'vco1_frequency', targetValue: 0, instruction: 'Set VCO 1 FREQUENCY to center (0 octaves)' },
      { control: 'vco2_frequency', targetValue: 0.5, instruction: 'Set VCO 2 FREQUENCY slightly higher (+0.5 octaves)' },
      { control: 'vco_decay', targetValue: 300, instruction: 'Set VCO DECAY to 300ms for pitch sweep' },
      { control: 'vco1_level', targetValue: 80, instruction: 'Set VCO 1 LEVEL to 80%' },
      { control: 'vco2_level', targetValue: 60, instruction: 'Set VCO 2 LEVEL to 60%' },
      { control: 'noise', targetValue: 10, instruction: 'Add slight NOISE at 10%' },
      { control: 'vcf_cutoff', targetValue: 800, instruction: 'Set FILTER CUTOFF to 800Hz' },
      { control: 'vcf_eg', targetValue: 60, instruction: 'Set FILTER EG to +60% for click' },
      { control: 'vcf_decay', targetValue: 400, instruction: 'Set FILTER DECAY to 400ms' },
      { control: 'vca_decay', targetValue: 150, instruction: 'Set VCA DECAY to 150ms for short hit' },
    ],
  },
];

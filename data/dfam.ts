import type { DeviceSpec, Lesson } from '@/types';

// Based on official Moog DFAM specifications
// Source: https://api.moogmusic.com/sites/default/files/2018-04/DFAM_Manual.pdf
export const DFAM_SPEC: DeviceSpec = {
  name: 'DFAM - Drummer From Another Mother',
  manufacturer: 'Moog',
  width: 1200,
  height: 600,
  controls: {
    // OSCILLATORS SECTION (Top Row)
    vco1_frequency: {
      type: 'knob',
      position: { x: 100, y: 120 },
      min: -5,
      max: 5,
      default: 0,
      units: 'octaves',
      bipolar: true,
      label: 'VCO 1 FREQUENCY',
      size: 'medium',
      step: 0.1,
    },
    vco1_wave: {
      type: 'switch',
      position: { x: 100, y: 240 },
      min: 0,
      max: 1,
      default: 0,
      units: '%',
      label: 'VCO 1 WAVE',
      options: ['Triangle', 'Square'],
    },
    vco1_eg: {
      type: 'knob',
      position: { x: 200, y: 120 },
      min: -100,
      max: 100,
      default: 0,
      units: '%',
      bipolar: true,
      label: 'VCO 1 EG AMOUNT',
      size: 'small',
    },
    vco2_frequency: {
      type: 'knob',
      position: { x: 320, y: 120 },
      min: -5,
      max: 5,
      default: 0,
      units: 'octaves',
      bipolar: true,
      label: 'VCO 2 FREQUENCY',
      size: 'medium',
      step: 0.1,
    },
    vco2_wave: {
      type: 'switch',
      position: { x: 320, y: 240 },
      min: 0,
      max: 1,
      default: 0,
      units: '%',
      label: 'VCO 2 WAVE',
      options: ['Triangle', 'Square'],
    },
    vco2_eg: {
      type: 'knob',
      position: { x: 420, y: 120 },
      min: -100,
      max: 100,
      default: 0,
      units: '%',
      bipolar: true,
      label: 'VCO 2 EG AMOUNT',
      size: 'small',
    },
    vco_decay: {
      type: 'knob',
      position: { x: 540, y: 120 },
      min: 10,
      max: 10000,
      default: 300,
      units: 'ms',
      label: 'VCO DECAY',
      size: 'medium',
    },
    fm_amount: {
      type: 'knob',
      position: { x: 660, y: 120 },
      min: 0,
      max: 100,
      default: 0,
      units: '%',
      label: 'FM AMOUNT',
      size: 'small',
    },
    hard_sync: {
      type: 'button',
      position: { x: 760, y: 140 },
      min: 0,
      max: 1,
      default: 0,
      units: '%',
      label: 'HARD SYNC',
      led: true,
    },

    // MIXER SECTION
    vco1_level: {
      type: 'knob',
      position: { x: 100, y: 320 },
      min: 0,
      max: 100,
      default: 75,
      units: '%',
      label: 'VCO 1 LEVEL',
      size: 'medium',
    },
    vco2_level: {
      type: 'knob',
      position: { x: 220, y: 320 },
      min: 0,
      max: 100,
      default: 50,
      units: '%',
      label: 'VCO 2 LEVEL',
      size: 'medium',
    },
    noise: {
      type: 'knob',
      position: { x: 340, y: 320 },
      min: 0,
      max: 100,
      default: 10,
      units: '%',
      label: 'NOISE',
      size: 'medium',
    },

    // FILTER SECTION
    vcf_cutoff: {
      type: 'knob',
      position: { x: 520, y: 320 },
      min: 20,
      max: 20000,
      default: 1000,
      units: 'Hz',
      label: 'CUTOFF',
      size: 'large',
    },
    vcf_resonance: {
      type: 'knob',
      position: { x: 660, y: 320 },
      min: 0,
      max: 100,
      default: 30,
      units: '%',
      label: 'RESONANCE',
      size: 'medium',
    },
    vcf_eg: {
      type: 'knob',
      position: { x: 780, y: 320 },
      min: -100,
      max: 100,
      default: 0,
      units: '%',
      bipolar: true,
      label: 'VCF EG AMOUNT',
      size: 'small',
    },
    vcf_decay: {
      type: 'knob',
      position: { x: 880, y: 320 },
      min: 10,
      max: 10000,
      default: 400,
      units: 'ms',
      label: 'VCF DECAY',
      size: 'medium',
    },
    vcf_mode: {
      type: 'switch',
      position: { x: 1000, y: 340 },
      min: 0,
      max: 1,
      default: 0,
      units: '%',
      label: 'FILTER MODE',
      options: ['LP', 'HP'],
    },
    noise_vcf_mod: {
      type: 'knob',
      position: { x: 1000, y: 320 },
      min: 0,
      max: 100,
      default: 0,
      units: '%',
      label: 'NOISE/VCF MOD',
      size: 'small',
    },

    // VCA SECTION
    vca_decay: {
      type: 'knob',
      position: { x: 100, y: 480 },
      min: 10,
      max: 10000,
      default: 500,
      units: 'ms',
      label: 'VCA DECAY',
      size: 'medium',
    },
    vca_attack: {
      type: 'switch',
      position: { x: 220, y: 500 },
      min: 0,
      max: 1,
      default: 0,
      units: '%',
      label: 'VCA ATTACK',
      options: ['FAST', 'SLOW'],
    },
    volume: {
      type: 'knob',
      position: { x: 340, y: 480 },
      min: 0,
      max: 100,
      default: 75,
      units: '%',
      label: 'VOLUME',
      size: 'medium',
    },

    // SEQUENCER SECTION
    tempo: {
      type: 'knob',
      position: { x: 900, y: 480 },
      min: 10,
      max: 500,
      default: 120,
      units: 'BPM',
      label: 'TEMPO',
      size: 'large',
    },

    // Sequencer Steps
    step1: { type: 'button', position: { x: 100, y: 520 }, min: 0, max: 1, default: 0, units: '%', label: 'STEP 1', led: true },
    step2: { type: 'button', position: { x: 180, y: 520 }, min: 0, max: 1, default: 0, units: '%', label: 'STEP 2', led: true },
    step3: { type: 'button', position: { x: 260, y: 520 }, min: 0, max: 1, default: 0, units: '%', label: 'STEP 3', led: true },
    step4: { type: 'button', position: { x: 340, y: 520 }, min: 0, max: 1, default: 0, units: '%', label: 'STEP 4', led: true },
    step5: { type: 'button', position: { x: 420, y: 520 }, min: 0, max: 1, default: 0, units: '%', label: 'STEP 5', led: true },
    step6: { type: 'button', position: { x: 500, y: 520 }, min: 0, max: 1, default: 0, units: '%', label: 'STEP 6', led: true },
    step7: { type: 'button', position: { x: 580, y: 520 }, min: 0, max: 1, default: 0, units: '%', label: 'STEP 7', led: true },
    step8: { type: 'button', position: { x: 660, y: 520 }, min: 0, max: 1, default: 0, units: '%', label: 'STEP 8', led: true },

    // Pitch row
    pitch1: { type: 'knob', position: { x: 100, y: 580 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: 'PITCH 1', size: 'small' },
    pitch2: { type: 'knob', position: { x: 180, y: 580 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: 'PITCH 2', size: 'small' },
    pitch3: { type: 'knob', position: { x: 260, y: 580 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: 'PITCH 3', size: 'small' },
    pitch4: { type: 'knob', position: { x: 340, y: 580 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: 'PITCH 4', size: 'small' },
    pitch5: { type: 'knob', position: { x: 420, y: 580 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: 'PITCH 5', size: 'small' },
    pitch6: { type: 'knob', position: { x: 500, y: 580 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: 'PITCH 6', size: 'small' },
    pitch7: { type: 'knob', position: { x: 580, y: 580 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: 'PITCH 7', size: 'small' },
    pitch8: { type: 'knob', position: { x: 660, y: 580 }, min: -5, max: 5, default: 0, units: 'V', bipolar: true, label: 'PITCH 8', size: 'small' },

    // Velocity row
    velocity1: { type: 'knob', position: { x: 100, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: 'VEL 1', size: 'small' },
    velocity2: { type: 'knob', position: { x: 180, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: 'VEL 2', size: 'small' },
    velocity3: { type: 'knob', position: { x: 260, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: 'VEL 3', size: 'small' },
    velocity4: { type: 'knob', position: { x: 340, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: 'VEL 4', size: 'small' },
    velocity5: { type: 'knob', position: { x: 420, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: 'VEL 5', size: 'small' },
    velocity6: { type: 'knob', position: { x: 500, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: 'VEL 6', size: 'small' },
    velocity7: { type: 'knob', position: { x: 580, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: 'VEL 7', size: 'small' },
    velocity8: { type: 'knob', position: { x: 660, y: 640 }, min: 0, max: 100, default: 100, units: '%', label: 'VEL 8', size: 'small' },

    // Sequencer controls
    run_stop: { type: 'button', position: { x: 780, y: 540 }, min: 0, max: 1, default: 0, units: '%', label: 'RUN/STOP', led: true },
    adv_step: { type: 'button', position: { x: 780, y: 600 }, min: 0, max: 1, default: 0, units: '%', label: 'ADV/STEP', led: false },
    trigger: { type: 'button', position: { x: 780, y: 660 }, min: 0, max: 1, default: 0, units: '%', label: 'TRIGGER', led: false },
  },
  presets: {
    classic_kick: {
      name: 'Classic 909 Kick',
      source: 'Official Manual Page 9',
      description: 'Punchy 909-style kick drum',
      settings: {
        vco1_frequency: 0,
        vco2_frequency: 0.5,
        vco_decay: 300,
        vco1_level: 80,
        vco2_level: 60,
        noise: 10,
        vcf_cutoff: 800,
        vcf_eg: 60,
        vcf_decay: 400,
        vca_decay: 150,
        vca_attack: 'FAST',
      },
    },
    sub_kick: {
      name: '808 Sub Kick',
      source: 'Community',
      description: 'Deep sub bass kick like TR-808',
      settings: {
        vco1_frequency: -1,
        vco2_frequency: -0.5,
        vco_decay: 500,
        noise: 5,
        vcf_cutoff: 600,
        vca_decay: 300,
      },
    },
  },
};

export const DFAM_LESSONS: Lesson[] = [
  {
    device: 'DFAM',
    name: 'Classic 909 Kick',
    description: 'Create a punchy 909-style kick drum',
    source: 'Official Manual Page 9',
    steps: [
      {
        control: 'vco1_frequency',
        targetValue: 0,
        instruction: 'Set VCO 1 FREQUENCY to center (0 octaves)',
        manualReference: 'Manual p.9',
      },
      {
        control: 'vco2_frequency',
        targetValue: 0.5,
        instruction: 'Set VCO 2 FREQUENCY slightly higher (+0.5 octaves)',
      },
      {
        control: 'vco_decay',
        targetValue: 300,
        instruction: 'Set VCO DECAY to 300ms for pitch sweep',
      },
      {
        control: 'vco1_level',
        targetValue: 80,
        instruction: 'Set VCO 1 LEVEL to 80%',
      },
      {
        control: 'vco2_level',
        targetValue: 60,
        instruction: 'Set VCO 2 LEVEL to 60%',
      },
      {
        control: 'noise',
        targetValue: 10,
        instruction: 'Add slight NOISE at 10%',
      },
      {
        control: 'vcf_cutoff',
        targetValue: 800,
        instruction: 'Set FILTER CUTOFF to 800Hz',
      },
      {
        control: 'vcf_eg',
        targetValue: 60,
        instruction: 'Set FILTER EG to +60% for click',
      },
      {
        control: 'vcf_decay',
        targetValue: 400,
        instruction: 'Set FILTER DECAY to 400ms',
      },
      {
        control: 'vca_decay',
        targetValue: 150,
        instruction: 'Set VCA DECAY to 150ms for short hit',
      },
      {
        control: 'vca_attack',
        targetValue: 'FAST',
        instruction: 'Set VCA ATTACK to FAST',
      },
    ],
  },
  {
    device: 'DFAM',
    name: '808 Sub Kick',
    description: 'Deep sub bass kick like TR-808',
    source: 'Community',
    steps: [
      {
        control: 'vco1_frequency',
        targetValue: -1,
        instruction: 'Set VCO 1 FREQUENCY low (-1 octave)',
      },
      {
        control: 'vco2_frequency',
        targetValue: -0.5,
        instruction: 'Set VCO 2 FREQUENCY to -0.5 octaves',
      },
      {
        control: 'vco_decay',
        targetValue: 500,
        instruction: 'Set VCO DECAY to 500ms for long boom',
      },
      {
        control: 'noise',
        targetValue: 5,
        instruction: 'Minimal NOISE at 5%',
      },
      {
        control: 'vcf_cutoff',
        targetValue: 600,
        instruction: 'Low FILTER CUTOFF at 600Hz',
      },
      {
        control: 'vca_decay',
        targetValue: 300,
        instruction: 'VCA DECAY 300ms for sustain',
      },
    ],
  },
  {
    device: 'DFAM',
    name: 'Snappy Snare',
    description: 'Bright electronic snare with noise',
    source: 'Community',
    steps: [
      {
        control: 'vco1_frequency',
        targetValue: 2,
        instruction: 'Set VCO 1 FREQUENCY high (+2 octaves)',
      },
      {
        control: 'vco2_frequency',
        targetValue: 2.5,
        instruction: 'Set VCO 2 FREQUENCY to +2.5 octaves',
      },
      {
        control: 'vco_decay',
        targetValue: 100,
        instruction: 'Short VCO DECAY at 100ms',
      },
      {
        control: 'vco1_level',
        targetValue: 40,
        instruction: 'Set VCO 1 LEVEL to 40%',
      },
      {
        control: 'noise',
        targetValue: 80,
        instruction: 'Add lots of NOISE at 80%',
      },
      {
        control: 'vcf_cutoff',
        targetValue: 4000,
        instruction: 'High FILTER CUTOFF at 4000Hz for brightness',
      },
      {
        control: 'vcf_resonance',
        targetValue: 50,
        instruction: 'RESONANCE to 50% for snap',
      },
      {
        control: 'vca_decay',
        targetValue: 120,
        instruction: 'VCA DECAY 120ms for quick snap',
      },
    ],
  },
];
